= Travaux pratiques - L'API Servlet
Nicolas Frankel
:doctype: article
:encoding: utf-8
:lang: fr
:toc:
:toc-title: Table des matières
:toc-placement!:
:sectanchors:
:numbered:
:experimental:
:icons: font
:imagesdir: ./images/servlet
:toc:

include::../license.adoc[]

toc::[]

== Références

* <<../cours/servlet.adoc#,Slides>>
* http://docs.oracle.com/javaee/7/tutorial/webapp001.htm[Web Applications^]
* http://docs.oracle.com/javaee/7/tutorial/webapp002.htm[Web Application Lifecycle^]
* http://docs.oracle.com/javaee/7/tutorial/webapp004.htm[Web Module That Uses Java Servlet Technology^]

== Mise en place

=== Prérequis

Avant de commencer la réalisation de ces travaux pratiques, il est indispensable de disposer des logiciels suivants :

. http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html[Java Developer Kit, version 8^]
. https://openejb.apache.org/downloads.html[TomEE, WebProfile 7^]
. Un Atelier de Génie Logiciel *professionnel*
* Soit https://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/oxygenr[Eclipse IDE for Java EE Developers^]
* Soit https://www.jetbrains.com/idea/download/[IntelliJ IDEA Ultimate^]
+
TIP: La license Ultimate est gratuite pour les https://www.jetbrains.com/student/[étudiants^])
+
* Soit [line-through]#NetBeans IDE#

****
Dans la suite du document, les consignes seront données pour IntelliJ IDEA
****

=== Configuration du serveur d'applications

. Dans IntelliJ IDEA, cliquer sur le menu menu:Run[Edit Configuration] :
+
image::run-debug-config.png[Run/Debug Configurations,737,505,role="text-center"]
+
. Tout en haut à gauche, cliquer sur btn:[+], puis menu:Defaults[x items more... > TomEE Server > Local].
.. Dans la popup, cliquer sur btn:[Configure] au niveau du champ Application server.
.. Indiquer l'emplacement du répertoire d'installation de TomEE :
+
image::tomee-webprofile-config.png[TomEE Server,508,166,role="text-center"]
+
.. Cliquer sur btn:[Finish].
. Dans le champ Name, indiquer TomEE.
+
image::run-debug-tomee.png[Run/Debug Configurations,890,708,role="text-center"]
+
. Cliquer sur btn:[OK].

=== Création de projet

TIP: Cette étape sera répétée de nombreuses fois par la suite. Il est conseillé de se familiariser avec.

. Cliquer sur le menu menu:File[New > Project...].
. Dans la fenêtre _pop-up_ qui s'ouvre:
* Dans le volet gauche, sélectionner "Web Application"
* Remplir les champs de la manière suivante :
+
[cols="1,1,3", options="header"]
|===

| Champ | Valeur | Commentaire

| Project SDK | 1.8 | Utiliser le bouton btn:[New] pour pointer vers l'installation locale du JDK
| Java EE Version | Java EE 7 |
| Application Server | TomEE 7.0.68 | Le libellé exact dépend de la version installée dans l'étape précédente
| Additional Libraries and Frameworks | JavaEE Application | Laisser les valeurs par défaut dans le volet du bas

|===
+
image::new-project-type.png[New Project - step 1,756,534,role="text-center"]
+
* Cliquer sur btn:[Next].
. Dans la fenêtre suivante :
* Taper _servlet_ dans le champ Project name
* Sélectionner un emplacement adéquat pour le champ Project location
+
image::new-project-location.png[New Project - step 2,756,169,role="text-center"]
+
* Cliquer sur btn:[Finish].
. L'espace de travail doit afficher une structure similaire suivante :
+
image::created-project.png[Project has been created,679,296,role="text-center"]

=== Déploiement de l'application

L'étape de création du projet a normalement permis de déployer virtuellement l'application au serveur d'applications.
De fait, le lancement du serveur déploiera l'application.

=== Lancement de l'application

. Pour construire le projet, cliquer sur menu:Build[Build Project].
. Puis, pour lancer l'application, cliquer sur menu:Run[Debug TomEE 7.0.68].
. Un navigateur se lance et affiche la page <http://localhost:8080/>:
+
image::browser-default-page.png[Browser displaying default page,488,274,role="text-center"]
+

[IMPORTANT] 
.Diagnostic
====
Si le navigateur affiche une page de type 404 Not Found, appeler l'enseignant/l'assistant.
====